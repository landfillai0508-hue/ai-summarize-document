<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Document Summarizer</title>
    <style>
        body { font-family: 'Segoe UI', Roboto, Arial, sans-serif; margin: 2rem; background-color: #f5f5f5; color: #333; }
        h1 { font-size: 2.5rem; margin-bottom: .5rem; }
        h3 { font-size: 1.4rem; margin-top: 12px; }
        #messages { margin-top: 12px; color: #555; }
        .buttons-container { display:flex; flex-wrap:wrap; gap:1rem; align-items:center; margin-bottom:1rem; }
        .buttons-container input[type="file"] { margin-right:.5rem; }
        .buttons-container button { padding: .5rem 1rem; font-size: 1rem; min-width: 120px; background: #0053ba; color: #fff; border:none; border-radius:4px; }
        .buttons-container button:disabled { background:#aaa; }
        .buttons-container button:hover:not(:disabled) { background:#004a9a; }
        .buttons-container button:active:not(:disabled) { background:#00387d; }
        #optionsCard { background:#e0e0e0; padding:1.5rem; border-radius:4px; margin-bottom:1rem; box-shadow:0 2px 6px rgba(0,0,0,.1); }
        .form-row { display:flex; align-items:center; gap:.5rem; margin-top:.5rem; }
        .form-row input[type="checkbox"], .form-row input[type="number"] { border:1px solid #ccc; border-radius:4px; padding:.25rem .5rem; }
        textarea { width: 100%; height: 300px; background: #fff; color: #000; border: 1px solid #ccc; }
        .panel { flex: 1; background: #fff; padding: 1rem; border-radius: 4px; }
    </style>
</head>
<body>
<h1>DOCUMENT SUMMARIZER</h1>
<p>A quick, browser‑based tool that turns any text file into a concise, well‑structured summary using a large language
    model.</p>
<div class="main-content" style="display:flex; flex-direction:column; gap:1rem;">
    <div class="buttons-container">
        <input type="file" id="fileInput" accept="text/*">
        <button id="loadBtn">Load Document</button>
    </div>
    <textarea id="originalText" placeholder="Original document will appear here"
              style="width:100%; height:200px;"></textarea>
    <div style="display:flex; flex-direction:column; gap:1rem;">
        <div id="optionsCard"
             style="background:#e0e0e0; padding:1rem; border-radius:4px; margin-bottom:1rem; box-shadow:0 2px 6px rgba(0,0,0,.1);">
            <h3>Summary Options</h3>
            <label for="includeTitle">Include Title?</label>
            <input type="checkbox" id="includeTitle" checked>
            <label for="numParagraphs">Paragraphs:</label>
            <input type="number" id="numParagraphs" min="1" max="10" value="3">
            <label for="compressionRate">Compression Rate (0-1):</label>
            <input type="number" id="compressionRate" min="0" max="1" step="0.1" value="0.2">
            <button id="summarizeBtn"
                    style="background:#0053ba; color:#fff; border:none; border-radius:4px; padding:.5rem 1rem; font-size:1rem; min-width:120px;"
                    disabled>Summarize
            </button>
        </div>
        <div id="messages"></div>
        <h3 id="summaryTitle"></h3>
        <textarea id="summaryContent" placeholder="Summary will appear here"
                  style="width:100%; height:200px;"></textarea>
    </div>


    <script>
        const fileInput = document.getElementById('fileInput');
        const loadBtn = document.getElementById('loadBtn');
        const summarizeBtn = document.getElementById('summarizeBtn');
        const originalText = document.getElementById('originalText');
        const summaryTitle = document.getElementById('summaryTitle');
        const summaryContent = document.getElementById('summaryContent');
        const messages = document.getElementById('messages');

        let currentText = '';

        loadBtn.addEventListener('click', () => {
          const file = fileInput.files[0];
          if (!file) {
            alert('Please select a text file.');
            return;
          }
          const reader = new FileReader();
          reader.onload = e => {
            currentText = e.target.result;
            originalText.value = currentText;
            summarizeBtn.disabled = false;
            summaryTitle.textContent = '';
            summaryContent.value = '';
            messages.textContent = '';
          };
          reader.readAsText(file);
        });

        summarizeBtn.addEventListener('click', async () => {
          summarizeBtn.disabled = true;
          messages.textContent = 'Summarizing document...';
          try {
            const resp = await fetch('/summarize', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ text: currentText })
            });
            if (!resp.ok) throw new Error(`Error ${resp.status}: ${resp.statusText}`);
            const data = await resp.json();
            summaryTitle.textContent = "Title: " + data.title;
            summaryContent.value = data.content;
            messages.textContent = 'Summarization finished.';
          } catch (err) {
            messages.textContent = 'Error: ' + err.message;
          } finally {
            summarizeBtn.disabled = false;
          }
        });
    </script>
</body>
</html>
